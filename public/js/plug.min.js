!function(){var e=function(){function e(e){return e.toUpperCase()}return{talk:function(){console.log(e("Hello!"))}}}();e.talk()}();var express=require("express"),path=require("path"),app=express(),mongoose=require("mongoose"),bp=require("body-parser"),colors=require("colors");colors.setTheme({silly:"rainbow",input:"grey",verbose:"cyan",prompt:"grey",info:"green",data:"grey",help:"cyan",warn:"yellow",debug:"blue",error:"red"}),app.use(bp.json()),mongoose.connect("mongodb://localhost/website01",function(e){return e?void console.error("::Mongodb connection refused:: ".error+e.stack):void console.log("::database connection established::".info)});var myModel=mongoose.model("post",{name:{type:String},surname:{type:String},DOB:{type:String},title:{type:Date,"default":Date.now}});app.set("port",process.argv[2]||3e3),app.use(express["static"](path.join(__dirname,"../public"))),app.get("/",function(e,o){o.sendFile(path.join(__dirname,"../public/","index.html"))}),app.get("/about",function(e,o){o.sendFile(path.join(__dirname,"../public","about.html"))}),app.get("/api",function(e,o){myModel.find({name:"Jairo"},{_id:0},function(e,n){e&&console.error(e),o.status(200),o.send(n)})}),app.post("/api",function(e,o){var n=new myModel({name:e.body.name,surname:e.body.surname,DOB:e.body.DOB});n.save(function(e,n){e&&console.error("error!"),console.log("written to db."),o.status(201),o.json(n)})}),app.use(function(e,o,n){o.status(404),o.sendFile(path.join(__dirname,"../public","404.html"))}),app.use(function(e,o,n,t){console.error(e.stack),n.status(500),n.sendFile(path.join(__dirname,"../public","500.html"))}),app.listen(app.get("port"),function(){console.log("::Server started on localhost:".info+app.get("port")+", press Ctrl+c to kill the server.::".info)});